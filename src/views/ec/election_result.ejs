<!DOCTYPE html>
<html lang="en">

<head>
    <%- include("../includes/dash/head")-%>
        <style>
            @media print {
                footer,
                .btn-print {
                    display: none;
                }
                .election-results {
                    position: fixed;
                    top: 0 !important;
                    margin: 0 !important;
                    width: 99.9% !important;
                }
            }
        </style>
</head>

<body class="sb-nav-fixed ec-dashboard">
    <%- include('../includes/dash/topnav') -%>
        <div id="layoutSidenav">
            <%- include('../includes/dash/sidenav') -%>
                <div id="layoutSidenav_content">
                    <main>
                        <div class="container-fluid">
                            <!-- page content goes here -->
                            <%if(election){%>
                                <div class="election-results mt-5 mb-5">
                                    <div class="header">
                                        <p class="h2 text-center">Election Result</p>
                                        <button class="btn btn-primary btn-small btn-print" onclick="window.print();">Print</button>
                                    </div>
                                    <hr class="special">
                                    <%Object.keys(election.positions).forEach(function(position){%>
                                        <div class="position">
                                            <p class="h4 text-center">
                                                <%=position%>
                                            </p>
                                            <div class="candidates">
                                                <div class="row">
                                                    <%election.positions[position].forEach(function(candidate){%>
                                                        <!-- <div class="row" id="president"> -->
                                                        <div class="candidate col-sm-auto mb-2">
                                                            <figure>
                                                                <img src="data:<%=candidate.image.type%>;charset=utf-8;base64,<%=candidate.image.data.toString('base64')%>" alt="<%=candidate.name%>">
                                                                <figcaption>
                                                                    <%=candidate.name%>
                                                                </figcaption>
                                                            </figure>
                                                            <div class="gr">
                                                                <%if(election.voter_count > 0){%>
                                                                    <div class="progress">
                                                                        <div class="progress-bar" role="progressbar" style="width: <%=Number(((candidate.votes/election.voter_count) * 100)).toFixed(2)%>%;" aria-valuenow="<%=Number(((candidate.votes/election.voter_count) * 100)).toFixed(2)%>" aria-valuemin="0" aria-valuemax="100">
                                                                            <%=Number(((candidate.votes/election.voter_count) * 100)).toFixed(2)%>%
                                                                        </div>
                                                                    </div>
                                                                    <%}else{%>
                                                                        <div class="progress">
                                                                            <div class="progress-bar" role="progressbar" style="width:100%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                                                                                0%
                                                                            </div>
                                                                        </div>
                                                                        <%}%>
                                                                            <p>
                                                                                Votes=
                                                                                <%=candidate.votes%> out of
                                                                                    <%=election.voter_count%>
                                                                            </p>
                                                            </div>
                                                        </div>
                                                        <%})%>
                                                </div>
                                            </div>
                                            <hr class="special">
                                        </div>
                                        <%})%>
                                            <div class="text-left">
                                                <p>Total Votes Cast =
                                                    <%=election.voter_count%>
                                                </p>
                                            </div>
                                </div>
                                <%}%>
                        </div>
                    </main>
                    <%- include('../includes/dash/footer')-%>
                </div>
        </div>
        <%- include('../includes/dash/scripts') -%>
</body>

</html>